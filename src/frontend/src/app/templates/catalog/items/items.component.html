<div class="row" *ngIf="items; else preloader">

    <div class="row g-4 mb-4 justify-content-sm-around">
        <div class="col-sm-4">
            <input type="text" class="advanced-input" [(ngModel)]="search" placeholder="Search">
        </div>
        <div class="col-sm-2">
            <input type="text" class="advanced-input" [(ngModel)]="min" placeholder="Min">
        </div>
        <div class="col-sm-2">
            <input type="text" class="advanced-input" [(ngModel)]="max" placeholder="Max">
        </div>
        <div class="col-sm-1">
            <input type="checkbox" class="advanced-input" [(ngModel)]="available">
        </div>
        <div class="col-sm-2">
            <button class="advanced-input" (click)="filter()">Ok</button>
        </div>
    </div>

    <div class="row mb-2">
        <div class="col-md-2">
            <ul class="d-flex list-unstyled justify-content-between size-list">
                <li (click)="pageSize = 8" [ngClass]="pageSize == 8 ? 'active-page-size' : ''">8</li>
                <li (click)="pageSize = 12" [ngClass]="pageSize == 12 ? 'active-page-size' : ''">12</li>
                <li (click)="pageSize = 16" [ngClass]="pageSize == 16 ? 'active-page-size' : ''">16</li>
                <li (click)="pageSize = 20" [ngClass]="pageSize == 20 ? 'active-page-size' : ''">20</li>
            </ul>
        </div>
        <div class="col-md-10">
            <ul class="d-flex list-unstyled justify-content-between size-list">
                <li (click)="sortByName()">Название</li>
                <li (click)="sortByPrice()">Цена</li>
                <li (click)="sortByLook()">Просмотры</li>
                <li (click)="sortByCount()">Количество</li>
            </ul>
        </div>
    </div>

    <div class="col-sm-12">
        <div class="row gy-3">
            <div class="col-sm-3" *ngFor="let item of paginatedItems">
                <ng-template [ngIf]="item != null">
                    <div class="card">
                        <img *ngIf="item.images[0] != null" class="preview" src="{{ '../../assets/images/uploaded/' + item.images[0] }}" alt="img.item">
                        <img *ngIf="item.images[0] == null" class="preview" src="assets/images/preview.jpg" alt="img.item">
                        <div class="p-3">
                            <p class="fw-bold">{{ item.name }}</p>
                            <p class="text-black-50">{{ item.description }}</p>
                            <p class="text-black-50 h5 mb-4">{{ item.price }}</p>
                            <p class="text-black-50 h5 mb-4">{{ item.count }}</p>
                            <a class="float-start" (click)="addLook(item)" [routerLink]="['/product', item.id]">Смотреть</a>
                            <a class="float-end" href="#"><i class="fas fa-heart"></i></a>
                        </div>
                    </div>
                </ng-template>
            </div>
        </div>
    </div>

    <div class="col-sm-12 mt-5">
        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
                <li class="page-item">
                    <button class="page-link btn" [disabled]="pageIndex == 0" (click)="goIndex(pageIndex - 1)"><</button>
                </li>
                <li class="page-item" *ngFor="let page of pages">
                    <button class="page-link btn"
                            [ngStyle]="pageIndex == page ? {background: '#d6ecffa3'} : {background: 'white'}"
                            (click)="goIndex(page)">{{page + 1}}
                    </button>
                </li>
                <li class="page-item">
                    <button class="page-link btn" [disabled]="pageIndex == pages.length - 1" (click)="goIndex(pageIndex + 1)">></button>
                </li>
            </ul>
        </nav>
    </div>

</div>

<ng-template #preloader>
    <app-preloader></app-preloader>
</ng-template>